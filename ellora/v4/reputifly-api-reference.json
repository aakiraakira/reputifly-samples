{
  "api_profile": {
    "name": "Reputifly API",
    "version": "9.5",
    "base_url": "https://asia-southeast1-b2b-software.cloudfunctions.net",
    "description": "Full Reputifly backend API reference including public Lead Capture and protected Management Endpoints."
  },
  "endpoints": {
    "public_lead_capture": {
      "endpoint": "/reputifly",
      "method": "POST",
      "auth": "None",
      "description": "Public endpoint for processing web form submissions. Handles data capture, email notifications, auto-replies, rate limiting, and spam protection.",
      "payload_structure": {
        "system_configuration": {
          "description": "Reserved keys that control API behavior.",
          "fields": {
            "_to": {
              "type": "string",
              "requirement": "MANDATORY",
              "description": "Destination client email address."
            },
            "_subject": {
              "type": "string",
              "requirement": "OPTIONAL",
              "description": "Email subject."
            },
            "_auto_reply": {
              "type": "boolean",
              "requirement": "OPTIONAL",
              "default": false,
              "description": "Send auto-reply to lead."
            },
            "_auto_reply_subject": {
              "type": "string",
              "requirement": "OPTIONAL",
              "description": "Auto-reply subject line."
            },
            "_auto_reply_content": {
              "type": "string (HTML)",
              "requirement": "OPTIONAL",
              "description": "Custom HTML body for auto-reply."
            },
            "_sender_name": {
              "type": "string",
              "requirement": "OPTIONAL",
              "default": "Reputifly Leads",
              "description": "'From' name."
            },
            "_brand_color": {
              "type": "string",
              "requirement": "OPTIONAL",
              "default": "#0B0A14",
              "description": "Accent color."
            },
            "_brand_logo": {
              "type": "string",
              "requirement": "OPTIONAL",
              "description": "Header logo URL."
            }
          }
        },
        "lead_data_capture": {
          "description": "Dynamic data capture. Accepts ANY key-value pair not listed in 'system_configuration'."
        }
      }
    },
    "protected_management": {
      "auth_required": "Bearer <FIREBASE_ID_TOKEN>",
      "user_restriction": "Super Admin Only",
      "routes": {
        "/createClient": {
          "method": "POST",
          "body": {
            "email": "string",
            "password": "string",
            "sendEmail": "boolean",
            "enableTelegram": "boolean"
          }
        },
        "/manageClient": {
          "method": "POST",
          "body": {
            "uid": "string",
            "action": "enum('disable', 'enable', 'delete', 'update_limit', 'update_telegram_settings', 'update_review_settings')",
            "value": "any (optional based on action)"
          }
        },
        "/manageSystem": {
          "method": "POST",
          "body": {
            "action": "enum('toggleReports', 'update_global_limit', 'blacklist_add')",
            "value": "any"
          }
        },
        "/triggerManualReport": {
          "method": "POST",
          "body": {
            "targetEmail": "string (optional)"
          }
        }
      }
    }
  },
  "responses": {
    "success": {
      "code": 200,
      "schema": {
        "success": true
      }
    },
    "unauthorized": {
      "code": 401,
      "schema": {
        "error": "Unauthorized"
      }
    },
    "rate_limited": {
      "code": 429,
      "schema": {
        "error": "Daily email limit reached."
      }
    },
    "server_error": {
      "code": 500,
      "schema": {
        "error": "System Busy"
      }
    }
  }
}